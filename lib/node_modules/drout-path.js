
const Drout = require("drout");

module.exports = {
  render: (options) => {
    // we need paths specified
    if (!options.paths) {
      console.error("drout-path component rendered with no paths object");
      return null;
    }
    // if we weren't passed a path, detect it
    let path = options.path;
    if (!path && window) {
      path = window.location.pathname;
    }
    if (!path) {
      console.error("drout-path component rendered with no path specified");
      return null;
    }
    // see if our path lines up with an available option
    let activePath = null;
    if (options.paths[path]) {
      activePath = options.paths[path];
    }
    if (!activePath) {
      // TODO maybe 404?
      return null;
    }
    if (options.inherited) {
      activePath.inherited = Object.assign({}, options.inherited, activePath.inherited);
    }
    return Drout.render(activePath);
  },
};
